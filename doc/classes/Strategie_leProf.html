<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Strategie_leProf</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Strategie_leProf</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/strategie_le_prof_rb.html">
                lib/strategie_le_prof.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                <a href="Strategie.html">
                Strategie
               </a>
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
<a href="Strategie.html">Strategie</a> du Prof
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000026">check_dir</a>&nbsp;&nbsp;
      <a href="#M000032">check_line</a>&nbsp;&nbsp;
      <a href="#M000030">check_next</a>&nbsp;&nbsp;
      <a href="#M000025">check_program</a>&nbsp;&nbsp;
      <a href="#M000033">frei_bis</a>&nbsp;&nbsp;
      <a href="#M000034">gefaengnis</a>&nbsp;&nbsp;
      <a href="#M000029">kann_boese_sein</a>&nbsp;&nbsp;
      <a href="#M000023">new</a>&nbsp;&nbsp;
      <a href="#M000028">quetschen</a>&nbsp;&nbsp;
      <a href="#M000031">sackgasse?</a>&nbsp;&nbsp;
      <a href="#M000027">verar___en</a>&nbsp;&nbsp;
      <a href="#M000024">wohin?</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000023" class="method-detail">
        <a name="M000023"></a>

        <div class="method-heading">
          <a href="#M000023" class="method-signature">
          <span class="method-name">new</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000023-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000023-source">
<pre>
    <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 14</span>
14:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
15:     <span class="ruby-ivar">@force</span> = <span class="ruby-value">0</span>
16:     <span class="ruby-ivar">@boese</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">4</span>,<span class="ruby-keyword kw">false</span>)
17:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000026" class="method-detail">
        <a name="M000026"></a>

        <div class="method-heading">
          <a href="#M000026" class="method-signature">
          <span class="method-name">check_dir</span><span class="method-args">(spiel,x,y,dir, harakiri_detection = true)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Liefert true, wenn Spielzug ok
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000026-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000026-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 198</span>
198:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-identifier">spiel</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">harakiri_detection</span> = <span class="ruby-keyword kw">true</span>)
199:     <span class="ruby-identifier">fx</span>,<span class="ruby-identifier">fy</span> = <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">to_dir</span>
200:     <span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span> = <span class="ruby-identifier">x</span><span class="ruby-operator">+</span><span class="ruby-identifier">fx</span>, <span class="ruby-identifier">y</span><span class="ruby-operator">+</span><span class="ruby-identifier">fy</span>
201:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">spiel</span>[<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>][<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span><span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">spiel</span>[<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>][<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">-2</span>
202:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">harakiri_detection</span>
203:     <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>.<span class="ruby-identifier">each_index</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
204:       <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">lebend</span>[<span class="ruby-identifier">i</span>])
205:         <span class="ruby-identifier">p</span> = <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>[<span class="ruby-identifier">i</span>]
206: <span class="ruby-comment cmt">#        #puts &quot;[#{@me}] x,y: #{x},#{y}   a,b #{a},#{b}  and p=#{p.inspect}&quot;</span>
207:         <span class="ruby-keyword kw">if</span> ((<span class="ruby-identifier">p</span>[<span class="ruby-value">0</span>]<span class="ruby-operator">-</span><span class="ruby-identifier">a</span>).<span class="ruby-identifier">abs</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">p</span>[<span class="ruby-value">1</span>]<span class="ruby-operator">-</span><span class="ruby-identifier">b</span>).<span class="ruby-identifier">abs</span>) <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">and</span> ((<span class="ruby-identifier">p</span>[<span class="ruby-value">0</span>]<span class="ruby-operator">-</span><span class="ruby-identifier">x</span>).<span class="ruby-identifier">abs</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">p</span>[<span class="ruby-value">1</span>]<span class="ruby-operator">-</span><span class="ruby-identifier">y</span>).<span class="ruby-identifier">abs</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
208: <span class="ruby-comment cmt">#          #puts &quot;[#{@me}] Harakiri detection! Me at #{x},#{y}, the other at #{p.inspect}&quot;</span>
209:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
210:         <span class="ruby-keyword kw">end</span>
211:       <span class="ruby-keyword kw">end</span>
212:     }
213:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
214:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000032" class="method-detail">
        <a name="M000032"></a>

        <div class="method-heading">
          <a href="#M000032" class="method-signature">
          <span class="method-name">check_line</span><span class="method-args">(a,b,x,y,fx,fy,timer = 0)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Ueberprueft alle Felder ohne a,b bis und mit x,y ob die Felder frei sind
(oder werden!)
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000032-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000032-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 318</span>
318:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_line</span>(<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">fx</span>,<span class="ruby-identifier">fy</span>,<span class="ruby-identifier">timer</span> = <span class="ruby-value">0</span>)
319:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">a!</span>=<span class="ruby-identifier">x</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">b!</span>=<span class="ruby-identifier">y</span>
320:       <span class="ruby-identifier">a</span><span class="ruby-operator">+=</span><span class="ruby-identifier">fx</span>
321:       <span class="ruby-identifier">b</span><span class="ruby-operator">+=</span><span class="ruby-identifier">fy</span>
322:       <span class="ruby-identifier">timer</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
323:       <span class="ruby-identifier">art</span>,<span class="ruby-identifier">tm</span> = <span class="ruby-ivar">@spiel</span>[<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>]
324:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">art</span> <span class="ruby-operator">==</span> <span class="ruby-value">-1</span>
325:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">art</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">timer</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">tm</span>
326:     <span class="ruby-keyword kw">end</span>
327:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
328:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000030" class="method-detail">
        <a name="M000030"></a>

        <div class="method-heading">
          <a href="#M000030" class="method-signature">
          <span class="method-name">check_next</span><span class="method-args">(x,y,dir,apfx,apfy)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Direkten Weg zum Apfel?
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000030-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000030-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 285</span>
285:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_next</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">apfx</span>,<span class="ruby-identifier">apfy</span>)
286:     <span class="ruby-identifier">fx</span>, <span class="ruby-identifier">fy</span> = (<span class="ruby-identifier">apfx</span><span class="ruby-operator">-</span><span class="ruby-identifier">x</span>).<span class="ruby-identifier">sign</span>, (<span class="ruby-identifier">apfy</span><span class="ruby-operator">-</span><span class="ruby-identifier">y</span>).<span class="ruby-identifier">sign</span>
287:     <span class="ruby-comment cmt"># Zuerst in X-Richtung</span>
288:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fx</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">dir</span> <span class="ruby-operator">!=</span> (<span class="ruby-value">1</span><span class="ruby-operator">+</span><span class="ruby-identifier">fx</span>)
289:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_line</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">apfx</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">fx</span>,<span class="ruby-value">0</span>) <span class="ruby-keyword kw">and</span>
290:           <span class="ruby-identifier">check_line</span>(<span class="ruby-identifier">apfx</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">apfx</span>,<span class="ruby-identifier">apfy</span>,<span class="ruby-value">0</span>,<span class="ruby-identifier">fy</span>)
291:         <span class="ruby-keyword kw">return</span> <span class="ruby-value">1</span><span class="ruby-operator">-</span><span class="ruby-identifier">fx</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-ivar">@spiel</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-value">1</span><span class="ruby-operator">-</span><span class="ruby-identifier">fx</span>) <span class="ruby-keyword kw">and</span> (<span class="ruby-keyword kw">not</span> <span class="ruby-identifier">sackgasse?</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-value">1</span><span class="ruby-operator">-</span><span class="ruby-identifier">fx</span>))
292:       <span class="ruby-keyword kw">end</span>
293:     <span class="ruby-keyword kw">end</span>
294:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fy</span> <span class="ruby-operator">!=</span><span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">dir</span> <span class="ruby-operator">!=</span> (<span class="ruby-value">2</span><span class="ruby-operator">+</span><span class="ruby-identifier">fy</span>)
295:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_line</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">apfy</span>,<span class="ruby-value">0</span>,<span class="ruby-identifier">fy</span>) <span class="ruby-keyword kw">and</span>
296:           <span class="ruby-identifier">check_line</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">apfy</span>,<span class="ruby-identifier">apfx</span>,<span class="ruby-identifier">apfy</span>,<span class="ruby-identifier">fx</span>,<span class="ruby-value">0</span>)
297:         <span class="ruby-keyword kw">return</span> <span class="ruby-value">2</span><span class="ruby-operator">-</span><span class="ruby-identifier">fy</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-ivar">@spiel</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-value">2</span><span class="ruby-operator">-</span><span class="ruby-identifier">fy</span>) <span class="ruby-keyword kw">and</span> (<span class="ruby-keyword kw">not</span> <span class="ruby-identifier">sackgasse?</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-value">2</span><span class="ruby-operator">-</span><span class="ruby-identifier">fy</span>))
298:       <span class="ruby-keyword kw">end</span>
299:     <span class="ruby-keyword kw">end</span>
300:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
301:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000025" class="method-detail">
        <a name="M000025"></a>

        <div class="method-heading">
          <a href="#M000025" class="method-signature">
          <span class="method-name">check_program</span><span class="method-args">(x,y,dir,spiel)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000025-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000025-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 156</span>
156:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_program</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">spiel</span>)
157:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@program</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
158:     <span class="ruby-identifier">d</span> = <span class="ruby-ivar">@program</span>.<span class="ruby-identifier">shift</span>
159:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-identifier">spiel</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">d</span>)
160:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@programcondition</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;kleben&quot;</span>
161:         <span class="ruby-identifier">victim</span> = <span class="ruby-ivar">@boese</span>.<span class="ruby-identifier">index</span>(<span class="ruby-keyword kw">true</span>)
162:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">victim</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
163:           <span class="ruby-ivar">@programcondtion</span> = <span class="ruby-keyword kw">nil</span>
164:           <span class="ruby-ivar">@program</span> = <span class="ruby-keyword kw">nil</span>
165:           <span class="ruby-ivar">@boese</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">4</span>,<span class="ruby-keyword kw">false</span>)
166:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
167:         <span class="ruby-keyword kw">end</span>
168:         <span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span> = <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>[<span class="ruby-identifier">victim</span>]
169:         <span class="ruby-identifier">ok</span> = <span class="ruby-keyword kw">false</span>
170:         <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>
171:           <span class="ruby-identifier">fx</span>, <span class="ruby-identifier">fy</span> = <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_dir</span>
172:           <span class="ruby-identifier">xx</span>,<span class="ruby-identifier">yy</span> = <span class="ruby-identifier">a</span><span class="ruby-operator">+</span><span class="ruby-identifier">fx</span>, <span class="ruby-identifier">b</span><span class="ruby-operator">+</span><span class="ruby-identifier">fy</span>
173:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">spiel</span>[<span class="ruby-identifier">xx</span>,<span class="ruby-identifier">yy</span>][<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> (<span class="ruby-ivar">@me</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)
174:             <span class="ruby-identifier">ok</span> = <span class="ruby-keyword kw">true</span>
175:           <span class="ruby-keyword kw">end</span>
176:         <span class="ruby-keyword kw">end</span>
177:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">ok</span>
178:           <span class="ruby-ivar">@programcondtion</span> = <span class="ruby-keyword kw">nil</span>
179:           <span class="ruby-ivar">@program</span> = <span class="ruby-keyword kw">nil</span>
180:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
181:         <span class="ruby-keyword kw">end</span>
182:       <span class="ruby-keyword kw">end</span>
183:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sackgasse?</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">d</span>)
184:           <span class="ruby-ivar">@programcondtion</span> = <span class="ruby-keyword kw">nil</span>
185:           <span class="ruby-ivar">@program</span> = <span class="ruby-keyword kw">nil</span>
186:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>        
187:       <span class="ruby-keyword kw">end</span>
188:       <span class="ruby-ivar">@program</span>=<span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@program</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span><span class="ruby-value">0</span>
189: <span class="ruby-comment cmt">#      #puts &quot;[#{@me}] Programm ok to #{d} remains #{@program.inspect}&quot;</span>
190: <span class="ruby-comment cmt">#      gets</span>
191:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">d</span>
192:     <span class="ruby-keyword kw">end</span>
193:     <span class="ruby-ivar">@program</span> = <span class="ruby-keyword kw">nil</span>
194:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
195:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000033" class="method-detail">
        <a name="M000033"></a>

        <div class="method-heading">
          <a href="#M000033" class="method-signature">
          <span class="method-name">frei_bis</span><span class="method-args">(a,b,dir)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gibt das letzte freie <a href="Feld.html">Feld</a> auf einer Geraden
zurück
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000033-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000033-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 331</span>
331:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">frei_bis</span>(<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>,<span class="ruby-identifier">dir</span>)
332: <span class="ruby-comment cmt">#    #puts &quot;[#{@me}] frei_bis(#{a}, #{b}, #{dir}, #{timer})&quot;</span>
333:     <span class="ruby-identifier">fx</span>,<span class="ruby-identifier">fy</span> = <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">to_dir</span>
334:     <span class="ruby-keyword kw">begin</span>
335:       <span class="ruby-identifier">a</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">fx</span>
336:       <span class="ruby-identifier">b</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">fy</span>
337:       <span class="ruby-identifier">art</span>, <span class="ruby-identifier">tm</span> = <span class="ruby-ivar">@spiel</span>[<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>]
338:     <span class="ruby-keyword kw">end</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">art</span><span class="ruby-operator">==</span><span class="ruby-value">-1</span> <span class="ruby-keyword kw">or</span> (<span class="ruby-identifier">art</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span>)
339:     <span class="ruby-identifier">a</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">fx</span>
340:     <span class="ruby-identifier">b</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">fy</span>
341:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>
342:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000034" class="method-detail">
        <a name="M000034"></a>

        <div class="method-heading">
          <a href="#M000034" class="method-signature">
          <span class="method-name">gefaengnis</span><span class="method-args">(a,b,dir,drehsinn)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
gibt die Grösse vom &quot;Gefängnis&quot; zurück, wenn man bei a,b + dir
startet Grobe Schätzung. Inspiriert von der Idee von Dominik Reukauf
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000034-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000034-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 347</span>
347:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gefaengnis</span>(<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>,<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">drehsinn</span>)
348:     <span class="ruby-identifier">seiten</span> = []
349:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>
350:       <span class="ruby-identifier">dir</span> = (<span class="ruby-identifier">dir</span><span class="ruby-operator">+</span><span class="ruby-identifier">drehsinn</span>) <span class="ruby-operator">%</span> <span class="ruby-value">4</span>
351: <span class="ruby-comment cmt">#      #puts &quot;[#{@me}] gefaengnis(#{a},#{b},#{dir},#{drehsinn})&quot;</span>
352:       <span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span> = <span class="ruby-identifier">frei_bis</span>(<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>,<span class="ruby-identifier">dir</span>)
353:       <span class="ruby-identifier">seiten</span>.<span class="ruby-identifier">push</span>((<span class="ruby-identifier">x</span><span class="ruby-operator">-</span><span class="ruby-identifier">a</span>).<span class="ruby-identifier">abs</span><span class="ruby-operator">+</span>(<span class="ruby-identifier">y</span><span class="ruby-operator">-</span><span class="ruby-identifier">b</span>).<span class="ruby-identifier">abs</span>)
354:       <span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span> = <span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>
355:     <span class="ruby-keyword kw">end</span>
356:     <span class="ruby-identifier">r</span>=[<span class="ruby-identifier">seiten</span>[<span class="ruby-value">0</span>],<span class="ruby-identifier">seiten</span>[<span class="ruby-value">2</span>]].<span class="ruby-identifier">min</span><span class="ruby-operator">*</span>[<span class="ruby-identifier">seiten</span>[<span class="ruby-value">1</span>]<span class="ruby-operator">*</span><span class="ruby-identifier">seiten</span>[<span class="ruby-value">3</span>]].<span class="ruby-identifier">min</span>
357: <span class="ruby-comment cmt">#    #puts &quot;[#{@me}]     ergibt #{r} aus #{seiten.inspect}&quot;</span>
358:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">r</span>
359:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000029" class="method-detail">
        <a name="M000029"></a>

        <div class="method-heading">
          <a href="#M000029" class="method-signature">
          <span class="method-name">kann_boese_sein</span><span class="method-args">(spiel,me)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Gibt den Timer des eigenen Schlangenfeldes neben der nächsten
anschmiegsamen Schlange zurück und deren Position
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000029-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000029-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 261</span>
261:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">kann_boese_sein</span>(<span class="ruby-identifier">spiel</span>,<span class="ruby-identifier">me</span>)
262:     <span class="ruby-identifier">found</span> = <span class="ruby-value">0</span>
263:     <span class="ruby-identifier">schlange</span> = <span class="ruby-keyword kw">nil</span>
264:     <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>.<span class="ruby-identifier">each_index</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
265:       <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">i</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">me</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">lebend</span>[<span class="ruby-identifier">i</span>]
266:           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>[<span class="ruby-identifier">i</span>]
267:           <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>
268:             <span class="ruby-identifier">fx</span>,<span class="ruby-identifier">fy</span> = <span class="ruby-identifier">d</span>.<span class="ruby-identifier">to_dir</span>
269:             <span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span> = <span class="ruby-identifier">p</span>[<span class="ruby-value">0</span>]<span class="ruby-operator">+</span><span class="ruby-identifier">fx</span>,<span class="ruby-identifier">p</span>[<span class="ruby-value">1</span>]<span class="ruby-operator">+</span><span class="ruby-identifier">fy</span>
270:             <span class="ruby-identifier">art</span>,<span class="ruby-identifier">timer</span> = <span class="ruby-identifier">spiel</span>[<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>]
271:  <span class="ruby-comment cmt">#           #puts &quot;[#{@me}] pos #{x},#{y} has #{art}, #{timer}&quot;</span>
272:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">art</span> <span class="ruby-operator">==</span> (<span class="ruby-identifier">me</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)
273:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">timer</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">found</span>
274:                 <span class="ruby-identifier">found</span> = <span class="ruby-identifier">timer</span>
275:                 <span class="ruby-identifier">schlange</span> = <span class="ruby-identifier">i</span>
276:               <span class="ruby-keyword kw">end</span>
277:             <span class="ruby-keyword kw">end</span>
278:           <span class="ruby-keyword kw">end</span>
279:       <span class="ruby-keyword kw">end</span> 
280:     }
281:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">found</span>, <span class="ruby-identifier">schlange</span>
282:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000028" class="method-detail">
        <a name="M000028"></a>

        <div class="method-heading">
          <a href="#M000028" class="method-signature">
          <span class="method-name">quetschen</span><span class="method-args">(spiel, me, victim)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Treppenprogramm zur Wand, wenn eine Schlange hinter mir
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000028-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000028-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 243</span>
243:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quetschen</span>(<span class="ruby-identifier">spiel</span>, <span class="ruby-identifier">me</span>, <span class="ruby-identifier">victim</span>)
244:     <span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dirm</span> = <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>[<span class="ruby-identifier">me</span>]
245:     <span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>,<span class="ruby-identifier">dirv</span> = <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>[<span class="ruby-identifier">victim</span>]
246:     <span class="ruby-identifier">dist</span> = <span class="ruby-value">5</span>
247:     <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">x</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">dist</span> <span class="ruby-keyword kw">and</span> (<span class="ruby-identifier">dirm</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span> <span class="ruby-operator">==</span><span class="ruby-value">1</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">a</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">x</span>)
248:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2</span><span class="ruby-operator">*</span>(<span class="ruby-identifier">x</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)) {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span><span class="ruby-operator">%</span><span class="ruby-value">2</span><span class="ruby-operator">==</span><span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">dirm</span>}
249:     <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">x</span><span class="ruby-operator">&gt;=</span><span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">x</span><span class="ruby-operator">-</span><span class="ruby-identifier">dist</span> <span class="ruby-keyword kw">and</span> (<span class="ruby-identifier">dirm</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span> <span class="ruby-operator">==</span><span class="ruby-value">1</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">a</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">x</span>)
250:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2</span><span class="ruby-operator">*</span>(<span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">x</span><span class="ruby-operator">-</span><span class="ruby-identifier">x</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)) {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span><span class="ruby-operator">%</span><span class="ruby-value">2</span><span class="ruby-operator">==</span><span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">0</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">dirm</span>}
251:     <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">y</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">dist</span> <span class="ruby-keyword kw">and</span> (<span class="ruby-identifier">dirm</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">b</span><span class="ruby-operator">&lt;</span><span class="ruby-identifier">y</span>)
252:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2</span><span class="ruby-operator">*</span>(<span class="ruby-identifier">y</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)){<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span><span class="ruby-operator">%</span><span class="ruby-value">2</span><span class="ruby-operator">==</span><span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">3</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">dirm</span>}
253:     <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">y</span><span class="ruby-operator">&gt;=</span><span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">y</span><span class="ruby-operator">-</span><span class="ruby-identifier">dist</span> <span class="ruby-keyword kw">and</span> (<span class="ruby-identifier">dirm</span> <span class="ruby-operator">%</span> <span class="ruby-value">2</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">b</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">y</span>)
254:       <span class="ruby-keyword kw">return</span> <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2</span><span class="ruby-operator">*</span>(<span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">y</span><span class="ruby-operator">-</span><span class="ruby-identifier">y</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)) {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span><span class="ruby-operator">%</span><span class="ruby-value">2</span><span class="ruby-operator">==</span><span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value">1</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">dirm</span>}
255:     <span class="ruby-keyword kw">end</span>
256:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
257:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000031" class="method-detail">
        <a name="M000031"></a>

        <div class="method-heading">
          <a href="#M000031" class="method-signature">
          <span class="method-name">sackgasse?</span><span class="method-args">(x,y,dir)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Eventuelle Sackgasse voraus? True falls ja
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000031-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000031-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 305</span>
305:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sackgasse?</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>)
306:     <span class="ruby-identifier">fx</span>,<span class="ruby-identifier">fy</span> = <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">to_dir</span>
307:     <span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span> = <span class="ruby-identifier">x</span><span class="ruby-operator">+</span><span class="ruby-identifier">fx</span>,<span class="ruby-identifier">y</span><span class="ruby-operator">+</span><span class="ruby-identifier">fy</span>
308:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-ivar">@spiel</span>,<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>,(<span class="ruby-identifier">dir</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>,<span class="ruby-keyword kw">false</span>) <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">and</span>
309:        <span class="ruby-identifier">check_dir</span>(<span class="ruby-ivar">@spiel</span>,<span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>,(<span class="ruby-identifier">dir</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>,<span class="ruby-keyword kw">false</span>) <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
310:        <span class="ruby-comment cmt">#puts &quot;[#{@me}] Sackgasse gefunden! #{x},#{y} - #{dir}&quot;</span>
311:        <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
312:     <span class="ruby-keyword kw">end</span>
313:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
314:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000027" class="method-detail">
        <a name="M000027"></a>

        <div class="method-heading">
          <a href="#M000027" class="method-signature">
          <span class="method-name">verar___en</span><span class="method-args">(t, me, victim)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Baut ein Programm um anschmiegsame Schlangen einzuschliessen
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000027-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000027-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 217</span>
217:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">verar___en</span>(<span class="ruby-identifier">t</span>, <span class="ruby-identifier">me</span>, <span class="ruby-identifier">victim</span>)
218:     <span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span> = <span class="ruby-ivar">@spiel</span>.<span class="ruby-identifier">schlangen_pos</span>[<span class="ruby-identifier">me</span>]
219:     <span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span>,<span class="ruby-identifier">dirv</span> = <span class="ruby-ivar">@spiel</span>.<span class="ruby-identifier">schlangen_pos</span>[<span class="ruby-identifier">victim</span>]
220:     <span class="ruby-identifier">tdiff</span> = <span class="ruby-ivar">@spiel</span>[<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>][<span class="ruby-value">1</span>] <span class="ruby-operator">-</span> <span class="ruby-identifier">t</span>
221:     <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">tdiff</span><span class="ruby-operator">&gt;=</span><span class="ruby-value">8</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">tdiff</span> <span class="ruby-operator">&lt;=</span><span class="ruby-value">16</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">dir</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dirv</span>)
222:       <span class="ruby-identifier">turn</span> = <span class="ruby-value">0</span>
223:       <span class="ruby-identifier">fx</span>,<span class="ruby-identifier">fy</span> = <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">to_dir</span>
224:       <span class="ruby-identifier">dx</span>,<span class="ruby-identifier">dy</span> = <span class="ruby-identifier">x</span><span class="ruby-operator">-</span><span class="ruby-identifier">a</span>, <span class="ruby-identifier">y</span><span class="ruby-operator">-</span><span class="ruby-identifier">b</span>
225:       <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">dx</span>.<span class="ruby-identifier">abs</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">dy</span>.<span class="ruby-identifier">abs</span><span class="ruby-operator">==</span><span class="ruby-value">1</span>)
226:         <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">dx</span><span class="ruby-operator">*</span><span class="ruby-identifier">fy</span><span class="ruby-operator">-</span><span class="ruby-identifier">dy</span><span class="ruby-operator">*</span><span class="ruby-identifier">fx</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
227:           <span class="ruby-identifier">turn</span> = <span class="ruby-value">1</span>
228:         <span class="ruby-keyword kw">else</span>
229:           <span class="ruby-identifier">turn</span> = <span class="ruby-value">-1</span>
230:         <span class="ruby-keyword kw">end</span>
231:         <span class="ruby-identifier">p</span> = [<span class="ruby-value">1</span>,<span class="ruby-value">1</span>,<span class="ruby-value">1</span>,<span class="ruby-value">1</span>,<span class="ruby-value">2</span>,<span class="ruby-value">2</span>,<span class="ruby-value">2</span>]<span class="ruby-operator">+</span><span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>((<span class="ruby-identifier">tdiff</span><span class="ruby-operator">-</span><span class="ruby-value">8</span>)<span class="ruby-operator">/</span><span class="ruby-value">2</span>,<span class="ruby-value">2</span>)<span class="ruby-operator">+</span>[<span class="ruby-value">3</span>,<span class="ruby-value">3</span>,<span class="ruby-value">2</span>]
232:         <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">d</span><span class="ruby-operator">*</span><span class="ruby-identifier">turn</span><span class="ruby-operator">+</span><span class="ruby-identifier">dir</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>}
233: <span class="ruby-comment cmt">#        #puts &quot;[#{@me}] verar__en -&gt; #{p.inspect}&quot;</span>
234: <span class="ruby-comment cmt">#        gets</span>
235:         <span class="ruby-ivar">@programcondition</span> = <span class="ruby-value str">&quot;kleben&quot;</span>
236:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">p</span>
237:       <span class="ruby-keyword kw">end</span>
238:     <span class="ruby-keyword kw">end</span>
239:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span>
240:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000024" class="method-detail">
        <a name="M000024"></a>

        <div class="method-heading">
          <a href="#M000024" class="method-signature">
          <span class="method-name">wohin?</span><span class="method-args">(spiel)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000024-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000024-source">
<pre>
     <span class="ruby-comment cmt"># File lib/strategie_le_prof.rb, line 20</span>
 20:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wohin?</span>(<span class="ruby-identifier">spiel</span>)
 21:     <span class="ruby-ivar">@spiel</span> = <span class="ruby-identifier">spiel</span>
 22:     <span class="ruby-comment cmt"># Position und Richtung meiner Schlange</span>
 23:     <span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span> = <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">wo_bin_ich?</span>
 24:     <span class="ruby-comment cmt"># Apfel</span>
 25:     <span class="ruby-identifier">apfx</span>, <span class="ruby-identifier">apfy</span> = <span class="ruby-operator">*</span><span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">aepfel</span>[<span class="ruby-value">0</span>]
 26:     <span class="ruby-comment cmt"># Distanzen der Schlangen</span>
 27:     <span class="ruby-identifier">dist</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>.<span class="ruby-identifier">size</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
 28:       (<span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>[<span class="ruby-identifier">i</span>][<span class="ruby-value">0</span>]<span class="ruby-operator">-</span><span class="ruby-identifier">apfx</span>).<span class="ruby-identifier">abs</span><span class="ruby-operator">+</span>(<span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>[<span class="ruby-identifier">i</span>][<span class="ruby-value">1</span>]<span class="ruby-operator">-</span><span class="ruby-identifier">apfy</span>).<span class="ruby-identifier">abs</span>
 29:     }
 30:     <span class="ruby-comment cmt"># Meinen Index ermitteln und tote Schlange aussortieren</span>
 31:     <span class="ruby-identifier">me</span> = <span class="ruby-keyword kw">nil</span>
 32:     <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>.<span class="ruby-identifier">each_index</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
 33:       <span class="ruby-identifier">p</span> = <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">schlangen_pos</span>[<span class="ruby-identifier">i</span>]
 34:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">x</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">p</span>[<span class="ruby-value">1</span>]<span class="ruby-operator">==</span><span class="ruby-identifier">y</span>
 35:         <span class="ruby-identifier">me</span> = <span class="ruby-identifier">i</span>
 36:       <span class="ruby-keyword kw">end</span>
 37:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">spiel</span>.<span class="ruby-identifier">lebend</span>[<span class="ruby-identifier">i</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
 38:           <span class="ruby-identifier">dist</span>[<span class="ruby-identifier">i</span>] = <span class="ruby-value">99999</span>
 39:       <span class="ruby-keyword kw">end</span>
 40:     }
 41:     <span class="ruby-ivar">@me</span> = <span class="ruby-identifier">me</span>
 42:  <span class="ruby-comment cmt">#   #puts &quot;[#{@me}] Ich bin #{me} at #{spiel.schlangen_pos[me].inspect}&quot;</span>
 43: 
 44:     <span class="ruby-identifier">d</span> = <span class="ruby-identifier">check_program</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">spiel</span>)
 45:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span>
 46:       <span class="ruby-comment cmt">#puts &quot;[#{@me}] Programm sagt #{d}&quot;</span>
 47:     <span class="ruby-keyword kw">end</span>
 48:     
 49:     
 50:     <span class="ruby-comment cmt"># Sonst mal schauen, ob ich böse sein kann</span>
 51:     <span class="ruby-identifier">t</span>,<span class="ruby-identifier">s</span> = <span class="ruby-identifier">kann_boese_sein</span>(<span class="ruby-identifier">spiel</span>,<span class="ruby-identifier">me</span>)
 52:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span><span class="ruby-operator">&gt;</span><span class="ruby-value">0</span> <span class="ruby-keyword kw">and</span> <span class="ruby-ivar">@boese</span>[<span class="ruby-identifier">s</span>] <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
 53:       <span class="ruby-ivar">@boese</span>[<span class="ruby-identifier">s</span>] = <span class="ruby-keyword kw">true</span>
 54:       
 55:       <span class="ruby-ivar">@program</span> = <span class="ruby-identifier">quetschen</span>(<span class="ruby-identifier">spiel</span>, <span class="ruby-identifier">me</span>, <span class="ruby-identifier">s</span>)
 56:       <span class="ruby-identifier">d</span> = <span class="ruby-identifier">check_program</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">spiel</span>)
 57:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span>
 58:         <span class="ruby-comment cmt">#puts &quot;[#{@me}] Beginne zu quetschen mit #{d}&quot;</span>
 59:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">d</span> 
 60:       <span class="ruby-keyword kw">end</span>
 61:       <span class="ruby-ivar">@program</span> = <span class="ruby-identifier">verar___en</span>(<span class="ruby-identifier">t</span>, <span class="ruby-identifier">me</span>, <span class="ruby-identifier">s</span>)
 62:       <span class="ruby-identifier">d</span> = <span class="ruby-identifier">check_program</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>,<span class="ruby-identifier">spiel</span>)
 63:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span>
 64:         <span class="ruby-comment cmt">#puts &quot;[#{@me}] Beginne zu verar___en mit #{d}&quot;</span>
 65:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">d</span>
 66:       <span class="ruby-keyword kw">end</span>     
 67: <span class="ruby-comment cmt">#      #puts &quot;[#{@me}] #{me} kann böse sein mit t=#{t} und s=#{s} at #{spiel.schlangen_pos[s].inspect}&quot;</span>
 68:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">t</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
 69:       <span class="ruby-ivar">@boese</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">4</span>,<span class="ruby-keyword kw">false</span>)
 70:     <span class="ruby-keyword kw">end</span>
 71: 
 72: ??
 73:     <span class="ruby-comment cmt"># Wenn nicht, dann doch den Apfel suchen (eine andere Schlange macht ja</span>
 74:     <span class="ruby-comment cmt"># vielleicht Umwege</span>
 75:     <span class="ruby-identifier">d</span> = <span class="ruby-identifier">check_next</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">apfx</span>,<span class="ruby-identifier">apfy</span>)
 76:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">nil</span>
 77:       <span class="ruby-ivar">@force</span> = <span class="ruby-value">0</span>
 78:       <span class="ruby-comment cmt">#puts &quot;[#{@me}] Kann auf direktem Weg zum Apfel mit #{d}&quot;</span>
 79:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">d</span>
 80:     <span class="ruby-keyword kw">end</span>
 81:     
 82:     
 83:     <span class="ruby-comment cmt"># Direkter Weg nicht möglich</span>
 84: 
 85:     <span class="ruby-comment cmt"># Müssen wir Heizkörper bauen?</span>
 86:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@force</span> <span class="ruby-operator">!=</span><span class="ruby-value">0</span> 
 87:       <span class="ruby-identifier">d</span> = (<span class="ruby-identifier">dir</span><span class="ruby-operator">+</span><span class="ruby-ivar">@force</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>
 88:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-identifier">spiel</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">d</span>) <span class="ruby-keyword kw">and</span> (<span class="ruby-keyword kw">not</span> <span class="ruby-identifier">sackgasse?</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">d</span>))
 89:         <span class="ruby-comment cmt">#puts &quot;[#{@me}] Wir Heizkörpern mit #{d}&quot;</span>
 90:         <span class="ruby-ivar">@force</span> = <span class="ruby-value">0</span>
 91:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">d</span>
 92:       <span class="ruby-keyword kw">end</span>
 93:       
 94:       <span class="ruby-ivar">@force</span> = <span class="ruby-value">0</span>
 95:     <span class="ruby-keyword kw">end</span>
 96:     
 97:     <span class="ruby-comment cmt"># Sonst mal weiter in die gleiche Richtung  </span>
 98:     
 99:     <span class="ruby-comment cmt"># Ausser wenn Hindernis</span>
100:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-identifier">spiel</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>) <span class="ruby-keyword kw">and</span> (<span class="ruby-keyword kw">not</span> <span class="ruby-identifier">sackgasse?</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>))
101:       <span class="ruby-identifier">plus</span> = <span class="ruby-keyword kw">false</span>
102:       <span class="ruby-identifier">minus</span> = <span class="ruby-keyword kw">false</span>
103:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-identifier">spiel</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,(<span class="ruby-identifier">dir</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>) <span class="ruby-keyword kw">and</span> (<span class="ruby-keyword kw">not</span> <span class="ruby-identifier">sackgasse?</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,(<span class="ruby-identifier">dir</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>))
104:         <span class="ruby-identifier">plus</span> = <span class="ruby-keyword kw">true</span>
105:       <span class="ruby-keyword kw">end</span>
106:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-identifier">spiel</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,(<span class="ruby-identifier">dir</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>) <span class="ruby-keyword kw">and</span> (<span class="ruby-keyword kw">not</span> <span class="ruby-identifier">sackgasse?</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,(<span class="ruby-identifier">dir</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>))
107:         <span class="ruby-identifier">minus</span> = <span class="ruby-keyword kw">true</span>
108:       <span class="ruby-keyword kw">end</span>
109:       <span class="ruby-comment cmt"># Wenn sowohl links und rechts offen sind</span>
110:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">minus</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">plus</span>
111:         <span class="ruby-identifier">gplus</span> = <span class="ruby-identifier">gefaengnis</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>, <span class="ruby-value">1</span>)
112:         <span class="ruby-identifier">gminus</span> = <span class="ruby-identifier">gefaengnis</span>(<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>, <span class="ruby-value">-1</span>)
113:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">gplus</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">gminus</span>
114:           <span class="ruby-comment cmt">#puts &quot;[#{@me}] Plus #{gplus} &gt; Minus #{gminus} mit #{(dir+1)%4}&quot;</span>
115:           <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">dir</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>) <span class="ruby-operator">%</span> <span class="ruby-value">4</span>
116:         <span class="ruby-keyword kw">else</span>
117:           <span class="ruby-comment cmt">#puts &quot;[#{@me}] Plus #{gplus} &lt;= Minus #{gminus} mit #{(dir-1)%4}&quot;</span>
118:           <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">dir</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>) <span class="ruby-operator">%</span> <span class="ruby-value">4</span>
119:         <span class="ruby-keyword kw">end</span>
120:       <span class="ruby-keyword kw">else</span>
121:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">plus</span>
122:           <span class="ruby-ivar">@force</span> = <span class="ruby-value">1</span>
123:           <span class="ruby-comment cmt">#puts &quot;[#{@me}] Muss nach #{(dir+1)%4}&quot;</span>
124:           <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">dir</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>
125:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">minus</span>
126:           <span class="ruby-comment cmt">#puts &quot;[#{@me}] Muss nach #{(dir-1)%4}&quot;</span>
127:           <span class="ruby-ivar">@force</span> = <span class="ruby-value">-1</span>
128:           <span class="ruby-keyword kw">return</span> (<span class="ruby-identifier">dir</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>
129:         <span class="ruby-keyword kw">end</span>
130:       <span class="ruby-keyword kw">end</span>
131:     <span class="ruby-keyword kw">end</span>
132:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-identifier">spiel</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">dir</span>,<span class="ruby-keyword kw">false</span>)
133:       <span class="ruby-comment cmt">#puts &quot;[#{@me}] Erst mal weiter nach #{dir}&quot;      </span>
134:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">dir</span>
135:     <span class="ruby-keyword kw">end</span>
136:     ([<span class="ruby-value">-1</span>,<span class="ruby-value">1</span>].<span class="ruby-identifier">sort_by</span> { <span class="ruby-identifier">rand</span> }).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
137:       <span class="ruby-identifier">d</span> = (<span class="ruby-identifier">dir</span><span class="ruby-operator">+</span><span class="ruby-identifier">d</span>)<span class="ruby-operator">%</span><span class="ruby-value">4</span>
138:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_dir</span>(<span class="ruby-identifier">spiel</span>,<span class="ruby-identifier">x</span>,<span class="ruby-identifier">y</span>,<span class="ruby-identifier">d</span>,<span class="ruby-keyword kw">false</span>)
139:         <span class="ruby-comment cmt">#puts &quot;[#{@me}] Zufallsrichtung nach #{dir}&quot;</span>
140:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">d</span>
141:       <span class="ruby-keyword kw">end</span>
142:     }
143:     <span class="ruby-comment cmt">#puts &quot;[#{@me}] Bin wohl tot... #{dir}&quot;</span>
144:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">dir</span>
145:   <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>